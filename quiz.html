<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>츄 퀴즈!</title>
    <link rel="stylesheet" href="quiz.css">
    <script src="jquery-3.3.1.min.js"></script>
</head>
<body>

    <div class="grid">

        <h1>퀴즈</h1>

        <div id="quiz">

           <p id="question"></p>
     
           <div class="buttons">

              <button class="btn"></button>
              <button class="btn"></button>
              <button class="btn"></button>
              <button class="btn"></button>

           </div>
     
           <footer>

              <p id="progress">진행 정보</p>

           </footer>

        </div>

    </div>

        <script>

            function Question(text, choice, answer) {

                this.text = text;
                this.choice = choice; 
                this.answer = answer; 

            }

            function Quiz(questions) {

                this.score = 0; 
                this.questions = questions;
                this.questionIndex = 0;

            }

            Quiz.prototype.correctAnswer = function(answer) {

                return answer == this.questions[this.questionIndex].answer;

            }

            var questions = [

                new Question('츄의 생일은?', ['10월 20일', '5월 6일', '7월 19일', '1월 24일'], '10월 20일'),
                new Question('츄의 본명은?', ['김영중', '엄준식', '김지우', '폰은정'], '김지우'),
                new Question('츄의 소속 그룹 이름은?', ['H.O.T', '이달의 소녀', '코요태', '젝스키스'], '이달의 소녀'),
                new Question('츄의 국적은?', ['콩고 민주 공화국', '조선민주주의인민공화국', '파키스탄', '대한민국'], '대한민국'),
                new Question('츄의 데뷔일은?', ['2017년 12월 28일', '2017년 10월 27일', '2018년 2월 22일', '2016년 4월 7일'], '2017년 12월 28일')
                
            ];

            var quiz = new Quiz(questions);

            function updateQuiz() {

                var question = document.getElementById('question');
                var idx = quiz.questionIndex + 1;
                var choice = document.querySelectorAll('.btn');
                question.innerHTML = '문제' + idx + ') ' + quiz.questions[quiz.questionIndex].text;

                for (var i = 0; i < 4; i++) {

                    choice[i].innerHTML = quiz.questions[quiz.questionIndex].choice[i];

                }

                progress();
            }

            function progress() {   

                var progress = document.getElementById('progress');
                progress.innerHTML = '문제 ' + (quiz.questionIndex + 1) + '/ ' + quiz.questions.length;

            }

            var btn = document.querySelectorAll('.btn');

            function checkAnswer(i) {

                btn[i].addEventListener('click', function() {

                    var answer = btn[i].innerText;

                    if (quiz.correctAnswer(answer)) {

                        alert('정답입니다!');
                        quiz.score++;

                    } else {

                        alert('틀렸습니다!');

                    }

                    if (quiz.questionIndex < quiz.questions.length - 1) {

                        quiz.questionIndex++;
                        updateQuiz();

                    } else {

                        result();

                    }

                });

            }

            function result() {

                var quizDiv = document.getElementById('quiz');
                var per = parseInt((quiz.score * 100) / quiz.questions.length);
                var txt = '<h1>결과</h1>' + '<h2 id="score">당신의 점수: ' + quiz.score + '/' + quiz.questions.length + '<br><br>' + per + '점' + '</h2>';

                quizDiv.innerHTML = txt;

                if (per < 60) {

                    txt += '<h2>분발하세요 ㅡㅡ</h2>';
                    quizDiv.innerHTML = txt;

                } else if (per >= 60 && per < 80) {

                    txt += '<h2>아쉽네요 ㅠ</h2>'
                    quizDiv.innerHTML = txt;

                } else if (per >= 80) {

                    txt += '<h2>대단해요! 100점!!</h2>'
                    quizDiv.innerHTML = txt;

                }

            }

            for (var i = 0; i < btn.length; i++) {

                checkAnswer(i);

            }

            updateQuiz();

    </script>

</body>
</html>